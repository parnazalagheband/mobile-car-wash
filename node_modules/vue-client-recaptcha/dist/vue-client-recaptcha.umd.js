/*
 * vue-client-recaptcha
 * Creator:parsajiravand
 * Build simple recaptcha for vuejs without need server
 * v1.1.4
 * MIT License
 */

(function(e,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VueClientRecaptcha=c(e.Vue))})(this,function(e){"use strict";var c="";return e.defineComponent({props:{value:{default:""},chars:{default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},count:{default:5},hideLines:{type:Boolean,default:!1},customTextColor:{default:""},textColors:{default:()=>[]},isDirty:{type:Boolean,default:!0},width:{default:function(i){return i.count*30}},height:{default:50},canvasClass:{default:""},icon:{default:"refresh"},captchaFont:{default:"bold 28px sans-serif"}},emits:["isValid","getCode","update:modelValue"],setup(i,{emit:s}){const a=i,u=e.useSlots(),n=e.ref();let o=e.ref(""),r=a.width,h=a.height;e.onMounted(()=>{f()});const f=()=>{n.value.width=r,n.value.height=h;let t=n.value.getContext("2d");for(let l=0;l<a.count;l++){let d=Math.floor(Math.random()*a.chars.length),x=Math.random()*30*Math.PI/180,v=a.chars[d];o.value+=v;let _=10+l*25,m=30+Math.random()*8;t.font=a.captchaFont,t.translate(_,m),a.customTextColor?t.fillStyle=a.customTextColor:a.textColors.length?t.fillStyle=a.textColors[Math.floor(Math.random()*a.textColors.length)]:t.fillStyle=p(),t.rotate(x),t.fillText(v,0,0),t.rotate(-x),t.translate(-_,-m)}a.hideLines||g(),C()},g=()=>{let t=n.value.getContext("2d");for(let l=0;l<a.count;l++)t.strokeStyle=p(),t.beginPath(),t.moveTo(Math.random()*r,Math.random()*h),t.lineTo(Math.random()*r,Math.random()*h),t.stroke()},C=()=>{s("getCode",o.value)};e.watchEffect(()=>{o.value&&o.value===a.value?s("isValid",!0):s("isValid",!1)}),e.watch(o,t=>{s("update:modelValue",t)});const p=()=>{let t=Math.floor(Math.random()*256),l=Math.floor(Math.random()*256),d=Math.floor(Math.random()*256);return"rgb("+t+","+l+","+d+")"},M=()=>{n.value.getContext("2d").clearRect(0,0,r,h),o.value="",f()},y=()=>e.h("div",{class:"vue_client_recaptcha"},[e.h("div",{class:"vue_client_recaptcha_icon",onClick:()=>M()},[e.h(u.icon?u.icon:"svg",{class:"vue_client_recaptcha_icon_svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e.h("path",{d:"M2 12a9 9 0 0 0 9 9c2.39 0 4.68-.94 6.4-2.6l-1.5-1.5A6.706 6.706 0 0 1 11 19c-6.24 0-9.36-7.54-4.95-11.95C10.46 2.64 18 5.77 18 12h-3l4 4h.1l3.9-4h-3a9 9 0 0 0-18 0Z",fill:"#333333"})])]),e.h("canvas",{id:"captcha_canvas",class:`captcha_canvas ${a.canvasClass}`,ref:n},o.value)]);return(t,l)=>(e.openBlock(),e.createBlock(y))}})});
